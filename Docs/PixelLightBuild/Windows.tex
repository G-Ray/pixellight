\chapter{Windows}
If you want to build PixelLight on Windows, you have two choices:
\begin{itemize}
\item{Use the provided \ac{MSVC} solutions to build the engine}
\item{Use the CMake based build system}
\end{itemize}

If you want to create \ac{SDK} packages or documentation or intend to e.g. use the mingw compiler or something like that, stick to the CMake path.

If you want to build only a local version of PixelLight but do not intend to create documentations or \ac{SDK} packages, you can just use the \ac{MSVC} solution files which are much easier to use. Note however, that you need to unpack the needed external packages first (see chapter~\ref{Chapter:ExternalDependencies}).





\section{\ac{MSVC} Solutions}



\subsection{Build}
Open the solution \emph{PixelLight.sln} with Microsoft Visual Studio, which includes all projects of the PixelLight framework. Then start \emph{Build}. Done.




\section{CMake}
Here's a list of required programs that you need to fully build the \ac{SDK} on Windows. In case you only want to build, for example the binaries, this is possible as well.



\subsection{Prerequisites for Binaries}
In order to compile the binaries you need the prerequisites listed below.


\paragraph{CMake}
\begin{itemize}
\item{Cross platform build tool used to build the \ac{SDK}}
\item{Download CMake at \url{http://www.cmake.org}}
\item{Tested with \emph{cmake-2.8.6-win32-x86.exe}}
\end{itemize}


\paragraph{Swiss File Knife}
\emph{cmake/UsedTools/sfk/sfk.exe} is already within the Git repository and was downloaded from \url{http://sourceforge.net/projects/swissfileknife/}. It's only mentioned in here for completeness.
\begin{itemize}
\item{\emph{Swiss File Knife}: file management, search, text processing}
\item{Directly used by the CMake scripts under \ac{MS} Windows}
\end{itemize}


\paragraph{Diff tools}
The \emph{cmake/UsedTools/diff} directory is already within the Git repository. It's only mentioned in here for completeness.
\begin{itemize}
\item{Some diff binaries directly used by the CMake scripts under \ac{MS} Windows}
\end{itemize}



\subsection{Prerequisites for Documentation}
In order to compile the documentation you need the prerequisites listed below.

\paragraph{Doxygen}
\begin{itemize}
\item{Used to create the code documentations}
\item{Download Doxygen at \url{http://www.doxygen.org}}
\item{Tested with \emph{doxygen-1.7.5.1-setup.exe}}
\end{itemize}


\paragraph{Graphviz}
\begin{itemize}
\item{Used from Doxygen to create diagrams}
\item{Download Graphviz at \emph{http://www.graphviz.org}}
\item{Tested with \emph{graphviz-2.28.0.msi}}
\item{Ensure that the Graphviz binaries directory is correctly set in the \emph{PATH} and/or \emph{DOT\_PATH} environment variables, otherwise Doxygen can't find Graphviz and as a result there will be no graphs within the generated document}
\end{itemize}


\paragraph{MiKTeX}
\begin{itemize}
\item{Used to create the \LaTeX{} documentations like the one you're currently reading}
\item{Download MiKTeX at \url{http://miktex.org/}}
\item{Tested with \emph{setup-2.9.4222.exe}}
\end{itemize}


\paragraph{Microsoft \ac{HTML} Help Compiler}
\begin{itemize}
\item{Used to create chm documentations from the \ac{HTML} help files created by Doxygen}
\item{The CMake system automatically searches for an installed Microsoft \ac{HTML} Help Compiler (\emph{hhc.exe})}
\item{Download Microsoft \ac{HTML} Help Workshop at \url{http://msdn.microsoft.com/en-us/library/ms669985} if it's not yet on your system}
\end{itemize}



\subsection{Prerequisites for Installable \ac{SDK}}
In order to compile the installable \ac{SDK} you need the prerequisites listed below.


\paragraph{\ac{NSIS}}
\begin{itemize}
\item{Used to create the Windows installer}
\item{Download \ac{NSIS} at \url{http://nsis.sourceforge.net/}}
\item{Tested with \emph{nsis-2.46-setup.exe}}
\end{itemize}




\subsection{Create Solutions and Build}
Here's how to compile PixelLight by using the CMake-\ac{GUI}:
\begin{itemize}
\item{Start "CMake (cmake-gui)"}
\item{"Where is the source code"-field: e.g. "C:/PixelLight"}
\item{"Where to build the binaries"-field: e.g. "C:/PixelLight/CMakeOutput"}
\item{Press the "Configure"-button}
\item{Choose the generator, for instance "Visual Studio 10"}
\item{Press the "Generate"-button}
\end{itemize}
The CMake part is done, you can close "CMake (cmake-gui)" now. The required external packages described within chapter~\ref{Chapter:ExternalDependencies} are automatically downloaded and extracted by the CMake based build system.


\paragraph{Visual Studio \ac{IDE}}
Here's how to compile PixelLight by using the Visual Studio \ac{IDE}:
\begin{itemize}
\item{Open "CMakeOutput/PixelLight.sln" with Microsoft Visual Studio}
\item{You may want to select \emph{Release} as the configuration to build}
\item{To create an installable PixelLight \ac{SDK}, choose "Pack-SDK", please note that you are free to compile projects individually as well}
\item{To build the documentation, choose "Docs"}
\end{itemize}


\paragraph{Visual Studio Command Prompt}
Here's how to compile PixelLight by using the Visual Studio command prompt:
\begin{itemize}
\item{Open the Visual Studio command prompt ("Visual Studio Command Prompt (2010)" or "Visual Studio x64 Win64 Command Prompt (2010)")}
\item{To build type "devenv <CMake output path>/PixelLight.sln /Build Release", example: "devenv C:/PixelLight/CMakeOutput/PixelLight.sln /Build Release"}
\end{itemize}




\section{Running from a Local Build}
Please note that the following information should only be required during development using PixelLight. Release versions of your application should always contain everything so it can be run out-of-the-box. It should not be required to manipulate the \emph{PATH environment variable} nor the \emph{registry} on the system of end-users.

Once you have built PixelLight, you may want to run e.g. the sample applications. In order for this to work correctly, PixelLight must know where to search for data files and plugins. The simplest solution is to just start \emph{PLInstall.exe}, which is inside your build PixelLight runtime directory (e.g. "C:/PixelLight/Bin/Runtime/x86/"). This tool automatically adds the required \emph{PATH environment variable} and the \emph{registry key}. In case you want to do this manually, continue reading.


\paragraph{PATH Environment Variable}
\ac{MS} Windows must be able to find the PixelLight \ac{DLL}s, meaning you have to add the directory of your PixelLight runtime build (for example "C:/PixelLight/Bin/Runtime/x86/") to the \ac{MS} Windows PATH environment variable.
\begin{itemize}
\item{1. Right click on the "My Computer"-icon on the desktop}
\item{2. Click on the "Advanced"-tab}
\item{3. Click the "Environment Variables"-Button}
\item{4. Under the "User Variables"-header, select the PATH entry and click "Edit"}
\item{5. Scroll to the end of the text, add a new semi-colon and enter the location of your PixelLight runtime directory (for example "C:/PixelLight/Bin/Runtime/x86/")}
\item{6. Click "Ok" on all the panels to exit this dialog}
\item{(7. You may have to restart your system, just try whether or not \ac{MS} Windows is now able to find the PixelLight \ac{DLL}s, if not, restart your system)}
\end{itemize}


\paragraph{Registry Key}
You may also want to add a key to the registry, so that the path to the build PixelLight runtime can be found in case you're using the static version of \emph{PLCore}. This key has to be at "HKEY\_LOCAL\_MACHINE/SOFTWARE/PixelLight/PixelLight-SDK/Runtime" (or at "HKEY\_LOCAL\_MACHINE/SOFTWARE/Wow6432Node/PixelLight/PixelLight-SDK/Runtime" if you are using a \SI{32}{\bit} PixelLight SDK on a \SI{64}{\bit} \ac{MS} Windows). This "Runtime"-key has e.g. the string value "C:/PixelLight/Bin/Runtime/x86/" (same as the PATH environment variable entry mentioned above).
